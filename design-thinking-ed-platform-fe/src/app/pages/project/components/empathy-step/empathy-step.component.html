<div class="empathy-step-container">
  <div class="header">
    <h1>Mapa de Empatia</h1>
  </div>

  <div class="empathy-step-header">
    <h2>Entendendo o Usuário</h2>
    <p>
      O Mapa de Empatia é uma ferramenta que nos ajuda a entender profundamente
      o usuário, mapeando seus pensamentos, sentimentos, ações e necessidades.
      Preencha cada seção com as observações e insights coletados durante a fase
      de empatia.
    </p>
  </div>

  <div class="empathy-step-content">
    <app-response-form
      [fields]="formFields"
      [loading]="(loading$ | async) ?? false"
      (submitForm)="onSubmit($event)"
    ></app-response-form>

    <div class="empathy-maps-grid">
      <div class="response-table-section" *ngFor="let type of responseTypes">
        <div class="table-header">
          <h3>{{ getTypeLabel(type) }}</h3>
        </div>
        <app-response-list
          [responses$]="getResponsesByType(type)"
          [displayedColumns]="displayedColumns"
          [currentUserId]="currentUserId"
          [isCurrentUser$]="isCurrentUser$"
          [loading$]="loading$"
          (upvote)="onUpvote($event)"
          (toggleSelection)="onToggleSelection($event)"
          (delete)="onDelete($event)"
          (edit)="onEdit($event)"
          (saveEdit)="onSaveEdit($event)"
          (refresh)="refreshData()"
        ></app-response-list>
      </div>
    </div>
  </div>
</div>
